{% comment %}
	Posting time line.
	
	Author: Sebastian Teumert (<http://www.teumert.net>, <http://www.github.com/NetzwergX>)
	Licensed under the MIT license (see LICENSE file).
	
	This widget displays a time line with month in which posts were written, grouped by year.	
	
	For more Jekyll widgets, see <http://www.github.com/NetzwergX/jekyll-template-toolkit>.
{% endcomment %}	
<section>
	<nav>
		<h1>Archive</h1>
		<ul class="postList archive">
		{% for post in site.posts %}
		
			{% if post.next %}		
					{% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
					{% capture nyear %}{{ post.next.date | date: '%Y' }}{% endcapture %}
					{% capture month %}{{ post.date | date: '%B' }}{% endcapture %}
					{% capture nmonth %}{{ post.next.date | date: '%B' }}{% endcapture %}
			{% endif %}
			
			{% if forloop.first %}				
					<!-- year -->
					<li><a href="/archives.html#{{ post.date | date: '%Y' }}">{{ post.date | date: '%Y' }}</a>				
						<ul>
							<!-- month -->
							<li><a href="/archives.html#{{ post.date | date: '%Y-%B' }}">{{ post.date | date: '%B' }}</a>							
								<ul>			
			{% else %}
				<!-- all other posts -->								
					{% if year != nyear %}	
								</ul>
							</li>						
							<!-- /month -->	
						</ul>
					</li>
					<!-- /year -->
					<!-- year -->
					<li><a href="/archives.html#{{ post.date | date: '%Y' }}">{{ post.date | date: '%Y' }}</a>				
						<ul>
							<!-- month -->
							<li><a href="/archives.html#{{ post.date | date: '%Y-%B' }}">{{ post.date | date: '%B' }}</a>							
								<ul>		
					{% elsif month != nmonth %}
								</ul>
							</li>						
							<!-- /month -->	
							<!-- month -->
							<li><a href="/archives.html#{{ post.date | date: '%Y-%B' }}">{{ post.date | date: '%B' }}</a>							
								<ul>												
					{% endif %}					
		   {% endif %}	
		   {% comment %}<li><a href="/{{ post.url }}">{{ post.title }}</a></li>	{% endcomment %}
		   
		   {% if forloop.last %}
		  						 </ul>
							</li>						
							<!-- /month -->	
						</ul>
					</li>
					<!-- /year -->		
		   {% endif %}		   		   		
		{% endfor %}														
		</ul>		
	</nav>
</section>

	